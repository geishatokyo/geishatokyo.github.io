<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <title>Geisha Tokyo Engineer's Blog - Unity 4.6 UI Tip&#58 UI Animation</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link href="/static/css/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <style>
    .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .cm {
  color: #999988;
  font-style: italic;
}
.highlight .cp {
  color: #999999;
  font-weight: bold;
}
.highlight .c1 {
  color: #999988;
  font-style: italic;
}
.highlight .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
.highlight .c, .highlight .cd {
  color: #999988;
  font-style: italic;
}
.highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}
.highlight .gd {
  color: #000000;
  background-color: #ffdddd;
}
.highlight .ge {
  color: #000000;
  font-style: italic;
}
.highlight .gr {
  color: #aa0000;
}
.highlight .gh {
  color: #999999;
}
.highlight .gi {
  color: #000000;
  background-color: #ddffdd;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .gt {
  color: #aa0000;
}
.highlight .kc {
  color: #000000;
  font-weight: bold;
}
.highlight .kd {
  color: #000000;
  font-weight: bold;
}
.highlight .kn {
  color: #000000;
  font-weight: bold;
}
.highlight .kp {
  color: #000000;
  font-weight: bold;
}
.highlight .kr {
  color: #000000;
  font-weight: bold;
}
.highlight .kt {
  color: #445588;
  font-weight: bold;
}
.highlight .k, .highlight .kv {
  color: #000000;
  font-weight: bold;
}
.highlight .mf {
  color: #009999;
}
.highlight .mh {
  color: #009999;
}
.highlight .il {
  color: #009999;
}
.highlight .mi {
  color: #009999;
}
.highlight .mo {
  color: #009999;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #009999;
}
.highlight .sb {
  color: #d14;
}
.highlight .sc {
  color: #d14;
}
.highlight .sd {
  color: #d14;
}
.highlight .s2 {
  color: #d14;
}
.highlight .se {
  color: #d14;
}
.highlight .sh {
  color: #d14;
}
.highlight .si {
  color: #d14;
}
.highlight .sx {
  color: #d14;
}
.highlight .sr {
  color: #009926;
}
.highlight .s1 {
  color: #d14;
}
.highlight .ss {
  color: #990073;
}
.highlight .s {
  color: #d14;
}
.highlight .na {
  color: #008080;
}
.highlight .bp {
  color: #999999;
}
.highlight .nb {
  color: #0086B3;
}
.highlight .nc {
  color: #445588;
  font-weight: bold;
}
.highlight .no {
  color: #008080;
}
.highlight .nd {
  color: #3c5d5d;
  font-weight: bold;
}
.highlight .ni {
  color: #800080;
}
.highlight .ne {
  color: #990000;
  font-weight: bold;
}
.highlight .nf {
  color: #990000;
  font-weight: bold;
}
.highlight .nl {
  color: #990000;
  font-weight: bold;
}
.highlight .nn {
  color: #555555;
}
.highlight .nt {
  color: #000080;
}
.highlight .vc {
  color: #008080;
}
.highlight .vg {
  color: #008080;
}
.highlight .vi {
  color: #008080;
}
.highlight .nv {
  color: #008080;
}
.highlight .ow {
  color: #000000;
  font-weight: bold;
}
.highlight .o {
  color: #000000;
  font-weight: bold;
}
.highlight .w {
  color: #bbbbbb;
}
.highlight {
  background-color: #f8f8f8;
}
    </style>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div id="navigation" class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../../../">Geisha Tokyo Engineer's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            <li><a href="../../../../rpscala.html">Scala勉強会</a>
            </li>
            <li><a href="https://github.com/geishatokyo/geishastudy" target="_blank">勉強会資料</a>
            </li>
            <li><a href="http://www.geishatokyo.com" target="_blank">運営会社</a>
            </li>
            <li><a href="http://www.geishatokyo.com/#!/recruit.html" target="_blank">採用ページ</a>
            </li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
    </nav>
    <div id="main" role="main">
      <div class="container">
        <div class="row">
          <div class="col-lg-8">
              <article> 
    <h1>Unity 4.6 UI Tip&#58 UI Animation </h1>
    <span>Posted on 2014-11-07
      by <a href="../../../authors/marconius.html">marconius</a>
    </span>
    <p>The single most obvious change made compared to the way Unity previously did GUI is the fact that every UI element is now a <em>GameObject</em>; compared to the old <code>OnGUI()</code> code-based UI, this has the obvious effects of making things significantly easier to oversee, maintain, and to add new elements and set up their relationships precisely; but one happy side effect is that because everything is now a <em>GameObject</em>, we can use an <strong>Animator</strong> to create UI animations!</p>

<p>This is briefly explained in the <a href="http://unity3d.com/learn/tutorials/modules/beginner/ui/ui-button">official UI Button tutorial video</a>, specifically for the case of <em>Button</em>s, which have a built-in transition system using automatically generated <em>Animator Controller</em>s. There is no reason why you can&rsquo;t do the same in the general case, however, and here is how:</p>

<h2>Animate using state transitions</h2>

<p>The simplest form of animation is transitioning between two states, which have no animation on their own.</p>

<p>First, we&rsquo;ll need an <strong>Animator</strong> component; the <em>Animator</em> can apply changes to the <em>GameObject</em> it&rsquo;s attached to, or any child of it, so we need to choose where to put it accordingly. The <em>Animator</em> will then require an <strong>Animator Controller</strong>, which we need to create in our <em>Assets</em>.</p>

<p><img alt="anim1" src="/static/images/2014/10/UnityUI/anim1.png" /></p>

<p>Now we open the <em>Animator window</em>, and click on our newly created <em>Animator Controller</em>. We now need to create all the states we want to use; we&rsquo;ll add transitions to them later, so for now:</p>

<p><img alt="anim2" src="/static/images/2014/10/UnityUI/anim2.png" /></p>

<p>Each state now requires a motion (<strong>Animation</strong>) attached to it, so we create one for each. Even if we intend to use the basic properties of the object in a state (usually the default state), we should still make an empty motion for it, because otherwise we won&rsquo;t be able to define transitions.</p>

<p><img alt="anim3" src="/static/images/2014/10/UnityUI/anim3.png" /></p>

<p>Let&rsquo;s set up out <em>Animation</em>s then: we&rsquo;ll keep the one on the default state empty, but we want some changes to happen in the other one. We open the <em>Animation window</em>, then in the <em>Hierarchy</em> we select the <em>GameObject</em> we attached the <em>Animator</em> to; in the <em>Animation window</em>, in the top left, we select the state we want to change, then simply click the record button (the little red circle): after this point, any changes we make in the editor will be recorded and made part of the animation, indicated by a red highlight on the property.</p>

<p><img alt="anim4" src="/static/images/2014/10/UnityUI/anim4.png" /></p>

<p>For example, we can change the color of an image; when possible, the transition we later create will actually change over time from the previous value to this one, creating a smooth transition.</p>

<p>We can set pretty much any property here, including positions or scale of objects; we can even change if a <em>Button</em> is <em>Interactable</em>, which comes in handy if we only want a button clickable in certain states; setting it here means we don&rsquo;t have to bother with it from code.</p>

<p><img alt="anim5" src="/static/images/2014/10/UnityUI/anim5.png" /></p>

<p>With our states now set up, we should set transitions between them. We want to transition using parameters, which we&rsquo;ll set from code, so we should define one first:</p>

<p><img alt="anim6" src="/static/images/2014/10/UnityUI/anim6.png" /></p>

<p>Then, we right-click on each state and set up the appropriate transitions:</p>

<p><img alt="anim7" src="/static/images/2014/10/UnityUI/anim7.png" /></p>

<p>Remember to set the conditions for each transition as well! (At the bottom.)</p>

<p><img alt="anim8" src="/static/images/2014/10/UnityUI/anim8.png" /></p>

<p>If we properly set up a motion for each state, the settings for the transition should now be visible above the conditions. We can set the highlighted blue area in the middle or slide around the two bars representing the states to fine-tune the time it takes for the transition to complete.</p>

<p>Now all we need to do is call <a href="http://docs.unity3d.com/ScriptReference/Animator.SetBool.html"><code>Animator.SetBool(string name, bool value)</code></a> from code to change our parameter and we&rsquo;re good to go! Or if we don&rsquo;t want to make a script, we can test it by changing the parameter directly in the <em>Animator window</em> during Play mode.</p>

<p><img alt="anim9" src="/static/images/2014/10/UnityUI/anim9.png" /></p>

<h2>Animate within states</h2>

<p>What if we don&rsquo;t want our UI elements to be completely static? Sure, we can transition between two states now, but perhaps in a highlighted state we&rsquo;d like our button to be flash or displaying some other simple animation. The <strong>Animation window</strong> can help us here; like before, select the appropriate element in the <em>Hierarchy</em>, then the appropriate state in the top left of the window.</p>

<p>Before, we created only one column of little dots, at <code>0:00</code>, which meant there was really no animation; these little dots, called <strong>key</strong>s (as in <a href="https://en.wikipedia.org/wiki/Key_frame">key frame</a>), are the basic elements of animation. If we want some actual animation, we first need to create a new key at some other point in time; we can do this by right-clicking or simply double-clicking at the appropriate time; then, like before, we can use the record button (the little red circle) to set properties for the key; clicking on a key will also start recording automatically. We can then click the play button (the little arrow) next to the record button to see our new animation in the <em>Game window</em>!</p>

<p><img alt="anim10" src="/static/images/2014/10/UnityUI/anim10.png" /></p>

<p>If we want more precise control over our animation, we can click the <strong>Curves button</strong> at the bottom of the screen. This will bring up a curve generated for each property we&rsquo;re modifying; we can drag the values of each key here, or double-click to add more keys if we want more precision.</p>

<p><img alt="anim11" src="/static/images/2014/10/UnityUI/anim11.png" /></p>

<p>Normally this animation will only play once; if we want it to <strong>loop</strong>, we can set that up in the properties of the <em>Animation</em> itself:</p>

<p><img alt="anim12" src="/static/images/2014/10/UnityUI/anim12.png" /></p>

<p>Of course, this animation and the transition from another state we did before can be used in combination; just be careful that the transition will overlap with the animation defined in a stance, which normally leads to a nice, smooth transition, but sometimes can end up looking odd; we can adjust timings carefully, or even consider adding an extra state (with a 0 time transition) if this becomes a problem.</p>

<p><img alt="anim13" src="/static/images/2014/10/UnityUI/anim13.png" /></p>

<hr>

<p>Created for <a href="http://unity3d.com/unity/beta/4.6">Unity 4.6</a> beta version 20.</p>

<p>This post is meant for advanced users; for basic information on the new UI features, please check the <a href="http://unity3d.com/learn/tutorials/modules/beginner/ui">offical tutorial videos</a>!</p>

    <hr>
    <h2>Tags</h2>
      <a href="../../../tags/unity.html">unity</a>
      <a href="../../../tags/unity-4-6.html">unity 4.6</a>
      <a href="../../../tags/unity-beta.html">unity beta</a>
      <a href="../../../tags/ui.html">ui</a>
      <a href="../../../tags/unity-new-ui.html">unity new ui</a>
      <a href="../../../tags/animation.html">animation</a>
    <hr>
    <ul class="social-button">
      <li>
        <div class="fb-share-button" data-type="button_count"></div>
      </li>
      <li>
        <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
      </li>
    </ul>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </article>

          </div>
          <div class="col-lg-4">
            <div class="well">
              <h4>Recent Articles</h4>
              <ol class="list-unstyled">
                  <li><a href="../../../2015/03/14/scala-android.html">Scala で作る Android ゲームアプリ</a> <span>2015-03-14</span></li>
                  <li><a href="unity-new-ui-anim.html">Unity 4.6 UI Tip&#58 UI Animation</a> <span>2014-11-07</span></li>
                  <li><a href="../04/unity-new-ui-refres.html">Unity 4.6 UI Tip&#58 Canvas Scaler (formerly Reference Resolution)</a> <span>2014-11-04</span></li>
                  <li><a href="../../10/30/unity-new-ui-canvas.html">Unity 4.6 UI Tip&#58 Override sorting with Canvas</a> <span>2014-10-30</span></li>
                  <li><a href="../../10/03/yamauchi.html">第4回芸者東京ハンズオン勉強会</a> <span>2014-10-03</span></li>
                  <li><a href="../../09/29/yamauchi.html">Dockerfile を書かなくてもできる Docker コンテナ運用</a> <span>2014-09-29</span></li>
                  <li><a href="../../09/08/yamauchi.html">第3回芸者東京ハンズオン勉強会</a> <span>2014-09-08</span></li>
                  <li><a href="../../07/29/takezoux2.html">Using AWS Java SDK with AWS IAM Role.</a> <span>2014-07-29</span></li>
                  <li><a href="../../06/24/yamauchi.html">第2回Scalaハンズオン勉強会2014-06-21</a> <span>2014-06-24</span></li>
                  <li><a href="../../06/02/presentaion-at-play-meetup.html">Presentaion at Play meetup</a> <span>2014-06-02</span></li>
              </ol>
            </div>
            <div class="well">
              <h4>By Year</h4>
              <ol class="list-unstyled">
                  <li><a href="../../../2015.html">2015 (1)</a></li>
                  <li><a href="../../../2014.html">2014 (13)</a></li>
                  <li><a href="../../../2013.html">2013 (3)</a></li>
                  <li><a href="../../../2012.html">2012 (10)</a></li>
                  <li><a href="../../../2011.html">2011 (11)</a></li>
                  <li><a href="../../../2010.html">2010 (3)</a></li>
              </ol>
            </div>
            <div class="well">
              <h4>Tags</h4>
              <div class="row">
                <div class="col-lg-6">
                  <ul class="list-unstyled">
                      <li><a href="../../../tags/java.html">Java (2)</a></li>
                      <li><a href="../../../tags/jetty.html">jetty (1)</a></li>
                      <li><a href="../../../tags/scala.html">Scala (10)</a></li>
                      <li><a href="../../../tags/tips.html">Tips (4)</a></li>
                      <li><a href="../../../tags/play-framework.html">play framework (3)</a></li>
                      <li><a href="../../../tags/sbt.html">sbt (2)</a></li>
                      <li><a href="../../../tags/unity.html">unity (3)</a></li>
                      <li><a href="../../../tags/unity-4-6.html">unity 4.6 (3)</a></li>
                      <li><a href="../../../tags/unity-beta.html">unity beta (3)</a></li>
                      <li><a href="../../../tags/ui.html">ui (3)</a></li>
                      <li><a href="../../../tags/unity-new-ui.html">unity new ui (3)</a></li>
                      <li><a href="../../../tags/canvas-scaler.html">canvas scaler (1)</a></li>
                      <li><a href="../../../tags/reference-resolution.html">reference resolution (1)</a></li>
                      <li><a href="../../../tags/resolution.html">resolution (1)</a></li>
                      <li><a href="../../../tags/scaling.html">scaling (1)</a></li>
                      <li><a href="../../../tags/nodejs.html">nodejs (1)</a></li>
                      <li><a href="../../../tags/lightning.html">Lightning (1)</a></li>
                      <li><a href="../../../tags/python.html">Python (1)</a></li>
                      <li><a href="../../../tags/geishastudy.html">geishastudy (3)</a></li>
                      <li><a href="../../../tags/scala.html">scala (6)</a></li>
                      <li><a href="../../../tags/android.html">android (2)</a></li>
                      <li><a href="../../../tags/hands-on.html">hands-on (2)</a></li>
                      <li><a href="../../../tags/seminar.html">seminar (2)</a></li>
                      <li><a href="../../../tags/blog.html">blog (1)</a></li>
                      <li><a href="../../../tags/middleman.html">middleman (1)</a></li>
                  </ul>
                </div>
                <div class="col-lg-6">
                  <ul class="list-unstyled">
                      <li><a href="../../../tags/github-pages.html">github pages (1)</a></li>
                      <li><a href="../../../tags/uncategorized.html">Uncategorized (4)</a></li>
                      <li><a href="../../../tags/aws.html">aws (1)</a></li>
                      <li><a href="../../../tags/iam.html">IAM (1)</a></li>
                      <li><a href="../../../tags/java.html">java (1)</a></li>
                      <li><a href="../../../tags/scala-js.html">scala.js (1)</a></li>
                      <li><a href="../../../tags/enchant-js.html">enchant.js (1)</a></li>
                      <li><a href="../../../tags/android.html">Android (3)</a></li>
                      <li><a href="../../../tags/maven.html">maven (4)</a></li>
                      <li><a href="../../../tags/docker.html">docker (1)</a></li>
                      <li><a href="../../../tags/dokku-alt.html">dokku-alt (1)</a></li>
                      <li><a href="../../../tags/git.html">git (1)</a></li>
                      <li><a href="../../../tags/c.html">C# (1)</a></li>
                      <li><a href="../../../tags/unity.html">Unity (1)</a></li>
                      <li><a href="../../../tags/canvas.html">canvas (1)</a></li>
                      <li><a href="../../../tags/sorting.html">sorting (1)</a></li>
                      <li><a href="../../../tags/ios.html">iOS (3)</a></li>
                      <li><a href="../../../tags/javascript.html">JavaScript (4)</a></li>
                      <li><a href="../../../tags/lua.html">Lua (1)</a></li>
                      <li><a href="../../../tags/css.html">css (1)</a></li>
                      <li><a href="../../../tags/animation.html">animation (1)</a></li>
                      <li><a href="../../../tags/play.html">play (1)</a></li>
                      <li><a href="../../../tags/dsl.html">dsl (1)</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="well">
              <h4>Authors</h4>
              <div class="row">
                <div class="col-lg-6">
                  <ul class="list-unstyled">
                      <li><a href="../../../authors/yyuu.html">yyuu</a></li>
                      <li><a href="../../../authors/y_okaya.html">y_okaya</a></li>
                      <li><a href="../../../authors/takezoux2.html">takezoux2</a></li>
                      <li><a href="../../../authors/marconius.html">marconius</a></li>
                      <li><a href="../../../authors/yamauchi.html">yamauchi</a></li>
                  </ul>
                </div>
                <div class="col-lg-6">
                  <ul class="list-unstyled">
                      <li><a href="../../../authors/ta2.html">ta2</a></li>
                      <li><a href="../../../authors/arikui.html">arikui</a></li>
                      <li><a href="../../../authors/k_ryoko.html">k_ryoko</a></li>
                      <li><a href="../../../authors/g_enrique.html">g_enrique</a></li>
                      <li><a href="../../../authors/kohashi.html">kohashi</a></li>
                      <li><a href="../../../authors/h_ninomiya.html">h_ninomiya</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="row">
        <div class="col-lg-12">
          <p>Copyright &copy; Geisha Tokyo Entertainment, Inc. 2010-</p>
        </div>
      </div>
    </footer>
  </body>
</html>
